--- RCPTT testcase ---
Format-Version: 1.0
Element-Name: AbandonRestore
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _JPUCYFT7Eeak2Y1KpcW4TQ
Runtime-Version: 2.1.0.201606221726
Save-Time: 7/28/16 5:14 PM
Testcase-Type: ecl

------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa
Content-Type: text/plain
Entry-Name: .description

Execute abandon and restore and check things
------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa--
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

runQueryAndOpenEditor [create-review -server $serverURL]

//Abandon the review and check the state of the button
get-editor | get-button Abandon | click
with [get-window "Abandon message"] {
	get-editbox | set-text "Abandon the review"
	get-button OK | click
}

with [get-editor] {
	verify-error { get-button Abandon }
	get-button Restore | get-property enablement | equals true | verify-true
}

assertStatusInDashboard ABANDONED

//Make sure there is an entry in the history
with [get-editor | get-table] {
	get-cell -row 0 -column 1 | get-property "columns[3]" | contains "Abandoned  Abandon the review" | verify-true
}

//Restore the review and check the state of the button
get-editor | get-button Restore | click
with [get-window "Restore message"] {
	get-editbox | set-text "Restore the review"
	get-button OK | click
}

with [get-editor] {
	get-button Abandon | get-property enablement | equals true | verify-true
	verify-error { get-button Restore }
}

assertStatusInDashboard NEW

//Make sure there is an entry in the history
with [get-editor | get-table] {
	get-cell -row 0 -column 1 | get-property "columns[3]" | contains "Restored  Restore the review" | verify-true
}

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
